<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NBA Player Roster</title>
    <style>
        /* General Styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #121212;
            color: #FFFFFF;
            margin: 0;
            padding: 30px;
        }

        .container {
            max-width: 1150px; 
            margin: auto;
            background: #1e1e1e; 
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        h1 {
            color: #FFFFFF; 
            text-align: center;
            margin-bottom: 25px;
            font-size: 2em;
        }
        a {
            color: #03DAC6; 
            text-decoration: none;
            transition: color 0.3s;
            display: inline-block;
            margin-bottom: 15px;
        }
        a:hover {
            color: #4FFFF0;
            text-decoration: underline;
        }

        /* Grid Layout */
        .player-grid {
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 25px; 
        }
        
        /* Player Card Styling */
        .player-card {
            background-color: #2c2c2c; 
            border: 1px solid #3d3d3d; 
            border-radius: 10px;
            padding: 10px 0 0 0; 
            text-align: left; 
            display: flex;
            flex-direction: column;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            box-sizing: border-box;
            color: #FFFFFF;
            height: 400px;
        }

        .player-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        /* Player Image Styling */
        .player-image {
            display: block;
            width: 350px; 
            height: auto;
            border-radius: 8px;
            object-fit: cover;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 0px; 
            box-sizing: border-box;
            margin-top: auto;
        }

        /* UPDATED: Player Details Container (now a flex container) */
        .player-details {
            width: 100%;
            padding: 5px 10px 10px 10px; /* Added 10px side padding */
            transition: background-color 0.3s ease; 
            border-radius: 0 0 10px 10px; 
            display: flex; /* Enable flexbox */
            justify-content: space-between; /* Space out the left and right info containers */
            align-items: flex-start; /* Align to the top */
            box-sizing: border-box;
        }
        
        /* New: Container for Name and Number (Left Side) */
        .player-info-left {
            padding-right: 10px; 
            flex-grow: 1; /* Allows the left side to take up available space */
        }

        /* New: Container for Height and Position (Right Side) */
        .player-info-right {
            display: flex;
            flex-direction: column; /* Stack height and position vertically */
            align-items: flex-end; /* Align the text to the right */
            padding-top: 0px; /* Vertically align with the h2 content */
            min-width: 80px; 
        }

        /* New: Styling for Height and Position text */
        .player-height{
            display: block; /* Ensure each takes its own line */
            font-size: 1.3em;
            font-weight: 400;
            line-height: 1.3;
            color: #c8c8c8; /* Lighter color for secondary details */
            transition: color 0.3s ease;
            padding-right: 7px
        }

        .player-position {
            display: block; /* Ensure each takes its own line */
            font-size: 1em;
            font-weight: 300;
            line-height: 1.3;
            color: #c8c8c8; /* Lighter color for secondary details */
            transition: color 0.3s ease;
        }


        /* Hover effects */
        .player-card:hover .player-details {
            background-color: #FFFFFF; 
        }
        /* Hover text color applied to h2 and its children */
        .player-card:hover .player-details h2 {
            color: #000000; 
        }
        .player-card:hover .jersey-num {
            color: #000000; 
            border-right-color: #c6c6c6; 
        }
        .player-card:hover .player-first-name {
            color: #000000; 
            font-weight: 400; 
        }
        /* New: Hover effects for right side */
        .player-card:hover .player-height,
        .player-card:hover .player-position {
            color: #4A4A4A; 
        }

        /* Name/Number Styling (h2 is inside player-details) */
        .player-details h2 {
            margin-top: 0;
            margin-bottom: 0;
            color: #FFFFFF; 
            font-size: 1.6em; 
            font-weight: 700;
            padding: 0; /* Adjusted: Removed side padding */
            width: 100%; 
            display: flex; 
            align-items: flex-start; 
            line-height: 1.1; 
            transition: color 0.3s ease;
            box-sizing: border-box;
        }
        
        /* Style for the jersey number part */
        .jersey-num {
            color: #FFFFFF; 
            font-size: 2.1em;
            font-weight: 800;
            margin-right: 8px;
            padding-right: 8px;
            padding-left: 0; /* Adjusted: Removed left padding */
            border-right: 2px solid #3d3d3d; 
            align-self: flex-start; 
            transition: color 0.3s ease, border-right-color 0.3s ease;
        }

        /* Container for the names to stack them vertically */
        .player-name-container {
            display: block; 
        }

        /* Style for the line break */
        .player-details h2 br {
            line-height: 0;
            display: block;
            content: "";
        }

        /* Reduced font weight for the first name */
        .player-first-name {
            font-weight: 200; 
            transition: font-weight 0.3s ease, color 0.3s ease;
        }


        /* Responsive Design: Adapt to smaller screens */
        @media (max-width: 1150px) { 
            .player-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .player-image {
                width: 100%;
                max-width: none;
                margin-left: auto;
                margin-right: auto;
            }
        }
        @media (max-width: 750px) { 
            .player-grid {
                grid-template-columns: 1fr;
            }
            .player-card {
                 padding: 10px 0 0 0;
            }
            .player-image {
                width: 90%; 
                max-width: 350px;
                margin-left: auto; 
                margin-right: auto; 
            }
            .container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>{{ team }} Roster</h1> 
        <p><a href="{{ url_for('home_page') }}">Back to Conferences</a></p>

        {% if players %}
            <div class="player-grid">
                {% for player in players %}
                    {% set parts = player.PLAYER.split(' ', 1) %}
                    {% set first_name = parts[0] %}
                    {% set last_name = parts[1] if parts | length > 1 else '' %}

                    {# New Variable to handle the jersey number display logic #}
                    {% set display_num = player.NUM %}
                    {% if display_num is none or display_num|string|lower == 'none' %}
                        {% set display_num = '--' %}
                    {% endif %}

                    <div class="player-card">
                        <img class="player-image" 
                             src="https://cdn.nba.com/headshots/nba/latest/1040x760/{{ player.PLAYER_ID }}.png" 
                             alt="Profile picture of {{ player.PLAYER }}"
                             onerror="this.onerror=null; this.src='https://placehold.co/260x190/3d3d3d/ffffff?text=Image+Missing';">
                        
                        {# MODIFIED: Structure for split details #}
                        <div class="player-details">
                            <div class="player-info-left">
                                <h2>
                                    <span class="jersey-num">{{ display_num }} </span> 
                                    <span class="player-name-container">
                                        <span class="player-first-name">{{ first_name }}</span>
                                        <br>{{ last_name }}
                                    </span>
                                </h2>
                            </div>
                            <div class="player-info-right">
                                <span class="player-height">{{ player.HEIGHT }}</span>
                                <span class="player-position">{{ player.POSITION }}</span>
                            </div>
                        </div>
                        {# END MODIFIED #}
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p style="text-align: center; color: #03DAC6;">No player data available. Please check the API connection or your data source.</p>
        {% endif %}

    </div>

</body>
</html>